{% extends 'base.html' %}

{% block title %}Usuarios{% endblock %}

{% block content %}
<div class="container">
  <div class="header-row">
    <h1>Usuarios</h1>
    <a class="btn" href="/users/create/">+ Nuevo</a>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Email</th>
        <th>Rol</th>
        <th>Equipo</th>
        <th>Estado</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.get_rol_display }}</td>
        <td>{{ u.team.name|default:'—' }}</td>
        <td>
          <span class="badge {{ u.is_active|yesno:'success,danger' }}">{{ u.is_active|yesno:'Activo,Inactivo' }}</span>
        </td>
        <td class="actions">
          <a class="btn" href="/users/update/{{ u.id }}/">Editar</a>
          {% if u != request.user %}
          <form method="post" action="/users/delete/{{ u.id }}/" style="display:inline;">
            {% csrf_token %}
            <button class="btn danger" type="submit">Eliminar</button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6">No hay usuarios.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="pagination">
    {% if users.has_previous %}
      <a href="?page={{ users.previous_page_number }}">« Anterior</a>
    {% endif %}
    <span>Página {{ users.number }} de {{ users.paginator.num_pages }}</span>
    {% if users.has_next %}
      <a href="?page={{ users.next_page_number }}">Siguiente »</a>
    {% endif %}
  </div>
</div>
{% endblock %}


